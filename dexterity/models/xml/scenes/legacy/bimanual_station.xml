<mujoco model="bimanual_station">
<!-- Copyright (c) 2023 Boston Dynamics AI Institute LLC. All rights reserved. -->
  <compiler angle="radian" meshdir="../../../meshes/iiwa7/visual/" autolimits="true"/>
  <!-- TODO this is a hack: Drake does not parse this include file correctly, so it uses the visual mesh path above.
            Mujoco can parse this include file, so it uses the collision mesh path specified there. -->
  <include file="bimanual_station_collision_path.xml"/>

  <option timestep="0.01"/>

  <asset>
    <texture name="blue_grid" type="2d" builtin="checker" rgb1=".02 .14 .44" rgb2=".27 .55 1" width="300" height="300" mark="edge" markrgb="1 1 1"/>
    <material name="blue_grid" texture="blue_grid" texrepeat="1 1" texuniform="true" reflectance=".2"/>
    <material class="iiwa" name="gray" rgba="0.4 0.4 0.4 1"/>
    <material class="iiwa" name="orange" rgba="1 0.423529 0.0392157 1"/>

    <mesh file="link_0.obj"/>
    <mesh file="link_1.obj"/>
    <mesh file="link_2.obj"/>
    <mesh file="link_3.obj"/>
    <mesh file="link_4.obj"/>
    <mesh file="link_5.obj"/>
    <mesh file="link_6.obj"/>
    <mesh file="link_7.obj"/>
  </asset>

  <default>
    <default class="iiwa">
      <!-- the margin gap parameters allow for collision detection to be triggered all the time -->
      <geom priority="2" friction="0.45 .01 .003" group="3" solref=".02 1" margin="0.0" gap="0.0"/>
      <material specular="0.5" shininess="0.25"/>
      <joint axis="0 0 1"  damping="3.0"/>
      <position kp="2.5" ctrlrange="-2.81706 2.81706" forcerange="-1000 1000" />
      <default class="joint1">
        <joint range="-2.96706 2.96706"/>
        <position ctrlrange="-2.81706 2.81706"/>
      </default>
      <default class="joint2">
        <joint range="-2.0944 2.0944"/>
        <position ctrlrange="-1.9444 1.9444"/>
      </default>
      <default class="joint3">
        <joint range="-2.0944 2.0944"/>
        <position ctrlrange="-1.9444 1.9444"/>
      </default>
      <default class="joint4">
        <joint range="-2.0944 2.0944"/>
        <position ctrlrange="-1.9444 1.9444"/>
      </default>
      <default class="joint5">
        <joint range="-3.05433 3.05433"/>
        <position ctrlrange="-2.90433 2.90433"/>
      </default>
      <default class="visual">
        <geom type="mesh" group="2" material="gray"/>
      </default>
    </default>
  </default>

  <worldbody>
    <site name="world"/>
    <body>
      <geom mass="0" name="floor" pos="0 0 -0.10" condim="3" size="10.0 10.0 0.10" rgba="0 1 1 1" type="box" material="blue_grid"/>
    </body>

    <body name="box" gravcomp="0" pos="0.0 0.0 0.0">
      <freejoint/>
      <geom name="box" type="box" mass="0.1" size="0.25 0.29 0.25" priority="1" condim="6" friction="0.45 .01 .003"/>
      <site pos="0 0 0.0" name="site_box"/>
    </body>

    <light name="top" pos="0 0 2" mode="trackcom"/>
    <body name="base_left" pos="0 -0.45 0" childclass="iiwa">
      <inertial mass="3.863" pos="-0.013 0 0.07" diaginertia="0.0141 0.0171 0.0178"/>
      <geom class="visual" mesh="link_0"/>
      <body name="link1_left" gravcomp="1" pos="0 0 0.1575">
        <inertial mass="2.7025" pos="0 -0.0347 0.113" diaginertia="0.0171 0.0163 0.006"/>
        <joint name="joint1_left" class="joint1"/>
        <geom class="visual" mesh="link_1"/>
        <site pos="0 0 -0.0005" name="site_link1_left"/>
        <body name="link2_left" gravcomp="1" pos="0 0 0.1830" quat="0 0 1 1">
          <inertial mass="2.7258" pos="0 0.0668 0.0344" diaginertia="0.0170 0.0162 0.0061" quat="0 0 1 1"/>
          <joint name="joint2_left" class="joint2"/>
          <geom class="visual" material="orange" mesh="link_2"/>
          <site pos="0 0 -0.01" name="site_link2_left"/>
          <body name="link3_left" gravcomp="1" pos="0 0.1845 0" quat="0 0 1 1">
            <inertial mass="3.175" pos="0 0.0296 0.1265" diaginertia="0.025 0.0238 0.0076"/>
            <joint name="joint3_left" class="joint1"/>
            <geom class="visual" mesh="link_3"/>
            <site pos="0 0 0.0355" name="site_link3_left"/>
            <body name="link4_left" gravcomp="1" pos="0 0 0.2155" quat="1 1 0 0">
              <inertial mass="2.73" pos="0 0.067 0.034" diaginertia="0.017 0.0162 0.0061" quat="1 1 0 0"/>
              <joint name="joint4_left" class="joint3"/>
              <geom class="visual" material="orange" mesh="link_4"/>
              <site pos="0 0.01 0.046" name="site_link4_left"/>
              <body name="link5_left" gravcomp="1" pos="0 0.1845 0" quat="0 0 1 1">
                <inertial mass="1.69" pos="0.0001 0.021 0.076" diaginertia="0.01 0.0087 0.00449"/>
                <joint name="joint5_left" class="joint1"/>
                <geom class="visual" mesh="link_5"/>
                <site pos="0 0 0.0335" name="site_link5_left"/>
                <body name="link6_left" gravcomp="1" pos="0 0 0.2155" quat="1 1 0 0">
                  <inertial mass="1.8" pos="0 0.0026 0.0005" diaginertia="0.0051 0.0047 0.0035" quat="1 1 0 0"/>
                  <joint name="joint6_left" class="joint4"/>
                  <geom class="visual" pos="0 0 -0.0607" material="orange" mesh="link_6"/>
                  <site pos="0 0 -0.059" name="site_link6_left"/>
                  <body name="link7_left" gravcomp="1" pos="0 0.081 0" quat="0 0 1 1">
                    <inertial mass="0.4" pos="0 0 0.0294" diaginertia="0.0004 0.0004 0.0005"/>
                    <joint name="joint7_left" class="joint5"/>
                    <geom class="visual" mesh="link_7"/>
                    <geom class="visual" type="cylinder" material="gray" size="0.0315 0.0305" pos="0 0 0.0305"/>
                    <geom class="visual" type="sphere" material="orange" size="0.0315" pos="0 0 0.061"/>
                    <site pos="0 0 0.001" name="site_link7_left"/>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
    <body name="base_right" pos="0 +0.45 0" childclass="iiwa">
      <inertial mass="3.863" pos="-0.013 0 0.07" diaginertia="0.0141 0.0171 0.0178"/>
      <geom class="visual" mesh="link_0"/>
      <body name="link1_right" gravcomp="1" pos="0 0 0.1575">
        <inertial mass="2.7025" pos="0 -0.0347 0.113" diaginertia="0.0171 0.0163 0.006"/>
        <joint name="joint1_right" class="joint1"/>
        <geom class="visual" mesh="link_1"/>
        <site pos="0 0 -0.0005" name="site_link1_right"/>
        <body name="link2_right" gravcomp="1" pos="0 0 0.1830" quat="0 0 1 1">
          <inertial mass="2.7258" pos="0 0.0668 0.0344" diaginertia="0.0170 0.0162 0.0061" quat="0 0 1 1"/>
          <joint name="joint2_right" class="joint2"/>
          <geom class="visual" material="orange" mesh="link_2"/>
          <site pos="0 0 -0.01" name="site_link2_right"/>
          <body name="link3_right" gravcomp="1" pos="0 0.1845 0" quat="0 0 1 1">
            <inertial mass="3.175" pos="0 0.0296 0.1265" diaginertia="0.025 0.0238 0.0076"/>
            <joint name="joint3_right" class="joint1"/>
            <geom class="visual" mesh="link_3"/>
            <site pos="0 0 0.0355" name="site_link3_right"/>
            <body name="link4_right" gravcomp="1" pos="0 0 0.2155" quat="1 1 0 0">
              <inertial mass="2.73" pos="0 0.067 0.034" diaginertia="0.017 0.0162 0.0061" quat="1 1 0 0"/>
              <joint name="joint4_right" class="joint3"/>
              <geom class="visual" material="orange" mesh="link_4"/>
              <site pos="0 0.01 0.046" name="site_link4_right"/>
              <body name="link5_right" gravcomp="1" pos="0 0.1845 0" quat="0 0 1 1">
                <inertial mass="1.69" pos="0.0001 0.021 0.076" diaginertia="0.01 0.0087 0.00449"/>
                <joint name="joint5_right" class="joint1"/>
                <geom class="visual" mesh="link_5"/>
                <site pos="0 0 0.0335" name="site_link5_right"/>
                <body name="link6_right" gravcomp="1" pos="0 0 0.2155" quat="1 1 0 0">
                  <inertial mass="1.8" pos="0 0.0026 0.0005" diaginertia="0.0051 0.0047 0.0035" quat="1 1 0 0"/>
                  <joint name="joint6_right" class="joint4"/>
                  <geom class="visual" pos="0 0 -0.0607" material="orange" mesh="link_6"/>
                  <site pos="0 0 -0.059" name="site_link6_right"/>
                  <body name="link7_right" gravcomp="1" pos="0 0.081 0" quat="0 0 1 1">
                    <inertial mass="0.4" pos="0 0 0.0294" diaginertia="0.0004 0.0004 0.0005"/>
                    <joint name="joint7_right" class="joint5"/>
                    <geom class="visual" mesh="link_7"/>
                    <geom class="visual" type="cylinder" material="gray" size="0.0315 0.0305" pos="0 0 0.0305"/>
                    <geom class="visual" type="sphere" material="orange" size="0.0315" pos="0 0 0.061"/>
                    <site pos="0 0 0.001" name="site_link7_right"/>
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
  </worldbody>

  <contact>
    <exclude body1="base_left" body2="link1_left"/>
    <exclude body1="base_right" body2="link1_right"/>
  </contact>

  <keyframe>
    <!-- mujoco q = [object_pos, object_quat, left_arm_pos, right_arm_pos] -->
    <key name="home" qpos="0 0 0.30   1 0 0 0   0 0 0 0 0 0 0   0 0 0 0 0 0 0" />
  </keyframe>

  <sensor>
    <framepos name="sensor_link1_left" objtype="site" objname="site_link1_left" reftype="site" refname="site_box" />
    <framepos name="sensor_link2_left" objtype="site" objname="site_link2_left" reftype="site" refname="site_box" />
    <framepos name="sensor_link3_left" objtype="site" objname="site_link3_left" reftype="site" refname="site_box" />
    <framepos name="sensor_link4_left" objtype="site" objname="site_link4_left" reftype="site" refname="site_box" />
    <framepos name="sensor_link5_left" objtype="site" objname="site_link5_left" reftype="site" refname="site_box" />
    <framepos name="sensor_link6_left" objtype="site" objname="site_link6_left" reftype="site" refname="site_box" />
    <framepos name="sensor_link7_left" objtype="site" objname="site_link7_left" reftype="site" refname="site_box" />
    <framepos name="sensor_link1_right" objtype="site" objname="site_link1_right" reftype="site" refname="site_box" />
    <framepos name="sensor_link2_right" objtype="site" objname="site_link2_right" reftype="site" refname="site_box" />
    <framepos name="sensor_link3_right" objtype="site" objname="site_link3_right" reftype="site" refname="site_box" />
    <framepos name="sensor_link4_right" objtype="site" objname="site_link4_right" reftype="site" refname="site_box" />
    <framepos name="sensor_link5_right" objtype="site" objname="site_link5_right" reftype="site" refname="site_box" />
    <framepos name="sensor_link6_right" objtype="site" objname="site_link6_right" reftype="site" refname="site_box" />
    <framepos name="sensor_link7_right" objtype="site" objname="site_link7_right" reftype="site" refname="site_box" />
  </sensor>

  <actuator>
    <general name="actuator1_left" joint="joint1_left" class="joint1"/>
    <general name="actuator2_left" joint="joint2_left" class="joint2"/>
    <general name="actuator3_left" joint="joint3_left" class="joint1"/>
    <general name="actuator4_left" joint="joint4_left" class="joint3"/>
    <general name="actuator5_left" joint="joint5_left" class="joint1"/>
    <general name="actuator6_left" joint="joint6_left" class="joint4"/>
    <general name="actuator7_left" joint="joint7_left" class="joint5"/>
    <general name="actuator1_right" joint="joint1_right" class="joint1"/>
    <general name="actuator2_right" joint="joint2_right" class="joint2"/>
    <general name="actuator3_right" joint="joint3_right" class="joint1"/>
    <general name="actuator4_right" joint="joint4_right" class="joint3"/>
    <general name="actuator5_right" joint="joint5_right" class="joint1"/>
    <general name="actuator6_right" joint="joint6_right" class="joint4"/>
    <general name="actuator7_right" joint="joint7_right" class="joint5"/>
  </actuator>
</mujoco>
